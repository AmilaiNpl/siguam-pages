(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[13],{1675:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var n=a(21),c=a(55),i=a.n(c),o=a(15),r=a(95),s=a(11),d=a(0),l=a.n(d),u=a(506),j=a(313),b=a(622),m=a(621),p=a(613),h=a(626),O=a(592),x=a(505),g=a(600),f=a(913),v=a(40),y=a(776),A=a.n(y),S=a(529),I=a(533),N=a(532),T=a(645),w=a(530),M=a(531),R=(a(688),a(83)),D=a(1100),C=a.n(D),P=a(1);var F=function(e){var t=Object(d.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],o=e.formValues,l=o.apelido,u=o.incorporacao,b=o.nome,m=o.pai,h=o.cidade,O=o.telemovel,x=o.ativo,g=o.mae,f=o.nuit,v=o.dataNascimento,y=o.sexo,A=o.nacionalidade,S=o.naturalidade,I=o.tipoDocumento,N=o.numeroDocumento,T=o.numero,w=o.situacao;function M(){return(M=Object(r.a)(i.a.mark((function e(){var t,a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(R.a)().buscarProvincia(),Object(R.a)().buscarCidades()]);case 2:t=e.sent,a=Object(s.a)(t,2),o=a[0],r=a[1],o.data,r.data,c(!n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log("nacionalidade",A),Object(d.useEffect)((function(){!function(){M.apply(this,arguments)}()}),[]),Object(P.jsxs)(p.a,{item:!0,xs:12,sm:12,children:[Object(P.jsx)(j.a,{variant:"h6",gutterBottom:!0,children:"Dados Biografico"}),Object(P.jsxs)(j.a,{style:{lineHeight:"25px"},children:["Codigo:",Object(P.jsx)("strong",{style:{paddingRight:"65px"},children:" ".concat(T||"")}),"Apelido:",Object(P.jsx)("strong",{style:{paddingRight:"60px"},children:" ".concat(l||"")}),"Nome Completo:",Object(P.jsx)("strong",{style:{paddingRight:"60px"},children:" ".concat(b||""," ").concat(l||"")}),"Filia\xe7\xe3o:",Object(P.jsx)("strong",{children:" ".concat(m||"")})," e de",Object(P.jsxs)("strong",{children:[" ","".concat(g||"")]}),Object(P.jsx)("br",{}),"Nascido aos: ",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:"".concat(C()(v||"").format("DD/MM/YYYY"))}),"Portador de:",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat("BI"===I?"Bilhete de Identidade":"Passaporte")})," N\xfamero: ",Object(P.jsxs)("strong",{style:{paddingRight:"57px"},children:[" ","".concat(N)]}),"Nuit:",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat(f||"Pendente")}),"Nocionalidade:",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat("Mo\xe7ambique"===(null===A||void 0===A?void 0:A.name)&&"Masculino"===y?"Mo\u04abambicano":A.name||"Mo\xe7ambique"===(null===A||void 0===A?void 0:A.name)&&"Femenino"===y?"Mo\u04abambicana":A.name)}),Object(P.jsx)("br",{}),"Natural de :",Object(P.jsx)("strong",{style:{paddingRight:"77px"},children:" ".concat(S.name)}),"Distrito de :",Object(P.jsx)("strong",{style:{paddingRight:"40px"},children:" ".concat(h.name)}),"Contacto :",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat(O)}),"Data de Incorporcao :",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat(u||"Nao Definido")}),"Estudante :",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat(x?u:"Nao Definido")}),"Estado :",Object(P.jsx)("strong",{style:{paddingRight:"24px"},children:" ".concat(w||"Nao Definido")})]})]})},B=a(499),E={},k=[],q=null,H=[],L=[],G=[],W=[],Y=[],z=Object(P.jsx)(l.a.Fragment,{children:Object(P.jsx)(u.a,{children:Object(P.jsx)(j.a,{sx:{fontSize:14},variant:"h2",color:"text.primary",gutterBottom:!0,children:"Historico Academico"})})});function U(e){var t=Object(d.useState)(!0),a=Object(s.a)(t,2),c=(a[0],a[1]),l=Object(d.useState)(!1),u=Object(s.a)(l,2),y=u[0],D=u[1],C=Object(d.useState)({}),U=Object(s.a)(C,2),J=(U[0],U[1]),V=Object(d.useState)([]),Q=Object(s.a)(V,2),K=Q[0],X=Q[1],Z=Object(d.useState)(""),$=Object(s.a)(Z,2),_=$[0],ee=$[1],te=Object(d.useState)(!1),ae=Object(s.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(d.useState)(!0),oe=Object(s.a)(ie,2),re=oe[0],se=oe[1],de=Object(v.useLocation)(),le=new URLSearchParams(de.search).get("id");console.log("===========Chegou aqui com id useParam: ",le),Object(d.useEffect)((function(){(function(e){je.apply(this,arguments)})(q=ue(le)),setTimeout((function(){se(!1)}),2e3)}),[]);var ue=function(e){return A.a.AES.decrypt(e,"ciam2023").toString(A.a.enc.Utf8)};function je(){return(je=Object(r.a)(i.a.mark((function e(t){var a,n,r,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(R.a)().getestudanteById("/".concat(t,"?campos=id,nome,situacao,ativo,incorporacao,nuit,numero,apelido,mae,pai,sexo,dataNascimento,email,telemovel,nacionalidade,cidade,naturalidade,tipoDocumento,numeroDocumento,dataEmissao,curriculo.id,curriculo.ano,curso.id,curso.nome")),Object(R.a)().getMatriculaByEstudante("/".concat(t))]);case 2:a=e.sent,n=Object(s.a)(a,2),r=n[0],d=n[1],Y=d,E=r.data,Y.data.forEach((function(e){var t=e.dataMatricula,a=new Date(t).getFullYear();k.includes(a)||(k.push("Todos Anos"),k.push(a))})),J(Object(o.a)({},E)),c(!1),D(!y),se(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){}function me(){return(me=Object(r.a)(i.a.mark((function e(){var t,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(setTimeout((function(){se(!1)}),2e3),"Todos Anos"!==_){e.next=7;break}return e.next=4,Promise.resolve(Object(R.a)().getAproveitamento("/".concat(q)));case 4:H=e.sent,e.next=12;break;case 7:return e.next=9,Promise.resolve(Object(R.a)().getAproveitamento("/".concat(q,"/").concat(_)));case 9:H=e.sent,L=H.data.filter((function(e){return"Exame"!==e.avaliacao.tipoAvaliacao&&"Rec"!==e.avaliacao.tipoAvaliacao})),0===H.data.length?(H=[{avaliacao:{id:260,tipoAvaliacao:"Teste",ordem:1}},{avaliacao:{id:260,tipoAvaliacao:"Teste",ordem:2}},{avaliacao:{id:260,tipoAvaliacao:"Trab",ordem:1}},{avaliacao:{id:260,tipoAvaliacao:"Trab",ordem:2}}],G=Array.from(new Set(H.map((function(e){return"".concat(e.avaliacao.tipoAvaliacao,"-").concat(e.avaliacao.ordem)})))),t=Y.data.map((function(e){return e.cadeiras})),W=G.length>0?G:["Teste-1","Teste-2","Trabalho-1","Trabalho-2"],X.apply(void 0,Object(n.a)(t))):(G=Array.from(new Set(L.map((function(e){return"".concat(e.avaliacao.tipoAvaliacao,"-").concat(e.avaliacao.ordem)})))),a=G.filter((function(e){return e.startsWith("Teste")})),c=G.filter((function(e){return e.startsWith("Trab")})),W=[].concat(Object(n.a)(a),Object(n.a)(c)),X(Array.from(new Set(Y.data.flatMap((function(e){return e.cadeiras.map((function(e){return e}))}))))),ce(!ne));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=function(e){var t=Object.values(e).filter((function(e){return""!==e&&null!==e&&!isNaN(parseFloat(e))}));return t.length>=3?(t.reduce((function(e,t){return e+parseFloat(t)}),0)/t.length).toFixed(2):""};return Object(P.jsx)("div",{children:re?Object(P.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:"20%"},children:Object(P.jsx)(B.a,{color:"#36d7b7"})}):Object(P.jsxs)(b.a,{children:[Object(P.jsx)(m.a,{children:Object(P.jsxs)(p.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)("br",{}),Object(P.jsx)(j.a,{variant:"h5",gutterBottom:!0,children:Object(P.jsx)("strong",{children:"Historico do Estudante"})}),Object(P.jsx)(F,{formValues:E})]}),Object(P.jsx)(h.a,{variant:"contained",className:"ImprimirDados",onClick:be,children:"Imprimir Dados"})]})}),Object(P.jsx)(m.a,{style:{marginTop:"5px"},children:Object(P.jsxs)(O.a,{sx:{minWidth:275},children:[Object(P.jsxs)(x.a,{variant:"outlined",children:[Object(P.jsx)(h.a,{variant:"contained",style:{float:"right"},className:"ImprimirDados",onClick:be,children:"Produzir Caderneta"}),z,Object(P.jsx)(p.a,{container:!0,spacing:2,children:Object(P.jsxs)(p.a,{item:!0,xs:12,sm:4,className:"selectComponet",children:[Object(P.jsx)(g.a,{className:"inputSelect",type:"text",variant:"outlined",name:"turma",onChange:function(e){ee(e.target.value)},select:!0,margin:"dense",id:"turma",fullWidth:!0,label:"-- Seleciona Ano Lectivo --",children:k.map((function(e){return Object(P.jsx)(f.a,{value:e,children:"Todos Anos"===e?"Todos Anos":"Ano Lectivo de "+e},e)}))}),Object(P.jsx)(h.a,{variant:"contained",className:"btnBuscar",onClick:function(){return me.apply(this,arguments)},children:"Buscar"})]})})]}),K.length>0&&Object(P.jsx)(x.a,{variant:"outlined",style:{marginTop:"2%"},children:Object(P.jsx)(T.a,{component:m.a,children:Object(P.jsxs)(S.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(P.jsx)(w.a,{children:Object(P.jsxs)(M.a,{children:[Object(P.jsx)(N.a,{children:"##"}),Object(P.jsx)(N.a,{children:"Codigo"}),Object(P.jsx)(N.a,{children:"Disciplina"}),Object(P.jsx)(N.a,{align:"right",children:"Ano"}),W.map((function(e,t){var a=e.split("-"),n=Object(s.a)(a,2),c=n[0],i=n[1];return Object(P.jsxs)(N.a,{align:"center",children:[c," - ",i]},t)})),Object(P.jsx)(N.a,{align:"right",children:"Frequ\xeancia"}),Object(P.jsx)(N.a,{align:"right",children:"Observa\xe7\xe3o"})]})}),Object(P.jsx)(I.a,{children:K.map((function(e,t){var a={},n=Y.data.find((function(t){return t.cadeiras.some((function(t){return t.nome===e.nome}))}));return G.forEach((function(t){var n,c=t.split("-"),i=Object(s.a)(c,2),o=i[0],r=i[1],d=null===(n=L)||void 0===n?void 0:n.find((function(t){return t.avaliacao.tipoAvaliacao===o&&t.avaliacao.ordem===parseInt(r)&&t.cadeira.nome===e.nome}));d&&null!==d.avaliacao.ordem?a[t]=d.nota:a[t]=null})),Object(P.jsxs)(M.a,{children:[Object(P.jsx)(N.a,{children:t+1}),Object(P.jsx)(N.a,{children:e.codigo}),Object(P.jsx)(N.a,{children:e.nome}),Object(P.jsx)(N.a,{align:"right",children:n?"Primeiro"===n.anoFrequencia?"1":"Segundo"===n.anoFrequencia?"2":"Terceiro"===n.anoFrequencia?"3":"Quarto"===n.anoFrequencia?"4":"5":""}),G.map((function(e,t){return Object(P.jsx)(N.a,{align:"center",style:{color:a[e]<=9.5?"red":"inherit"},children:a[e]},t)})),Object(P.jsx)(N.a,{align:"right",children:pe(G.map((function(e){return a[e]})))}),Object(P.jsx)(N.a,{align:"right",style:{color:pe(G.map((function(e){return a[e]})))<9.5?"red":pe(G.map((function(e){return a[e]})))>=13.5?"#3CB371":""},children:""!==pe(G.map((function(e){return a[e]})))?pe(G.map((function(e){return a[e]})))<9.5?"Excluido":pe(G.map((function(e){return a[e]})))>=13.5?"Dispensado":"Admitido":""})]},t)}))})]})})})]})})]})})}},688:function(e,t,a){},777:function(e,t){},913:function(e,t,a){"use strict";var n=a(4),c=a(5),i=a(2),o=a(0),r=(a(7),a(9)),s=a(493),d=a(6),l=a(12),u=a(308),j=a(494);function b(e){return Object(u.a)("MuiMenuItem",e)}Object(j.a)("MuiMenuItem",["root","gutters","selected","dense"]);var m=a(519),p=a(1),h=Object(d.a)(m.a,{shouldForwardProp:function(e){return Object(d.b)(e)||"classes"===e}},{name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.styleProps;return Object(i.a)({},Object(m.c)(e,t),a.dense&&t.dense)}})((function(e){var t=e.theme,a=e.styleProps;return Object(i.a)({},t.typography.body1,Object(n.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",whiteSpace:"nowrap"},t.breakpoints.up("sm"),{minHeight:"auto"}),a.dense&&Object(i.a)({},t.typography.body2,{minHeight:"auto"}))})),O=o.forwardRef((function(e,t){var a,n=Object(l.a)({props:e,name:"MuiMenuItem"}),o=n.className,d=n.component,u=void 0===d?"li":d,j=n.dense,O=void 0!==j&&j,x=n.disableGutters,g=void 0!==x&&x,f=n.ListItemClasses,v=n.role,y=void 0===v?"menuitem":v,A=n.selected,S=n.tabIndex,I=Object(c.a)(n,["className","component","dense","disableGutters","ListItemClasses","role","selected","tabIndex"]),N={dense:O},T=function(e){var t=e.selected,a=e.dense,n=e.classes,c={root:["root",t&&"selected",a&&"dense"]};return Object(s.a)(c,b,n)}(n);return n.disabled||(a=void 0!==S?S:-1),Object(p.jsx)(m.b,Object(i.a)({components:{Root:h},componentsProps:{root:{styleProps:N}},button:!0,role:y,tabIndex:a,component:u,selected:A,disableGutters:g,className:Object(r.default)(T.root,o),ref:t},I,{classes:f}))}));t.a=O}}]);
//# sourceMappingURL=13.52d88e36.chunk.js.map