/*! For license information please see 34.0753ae9c.chunk.js.LICENSE.txt */
(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[34],{1685:function(a,t,e){"use strict";e.r(t);var o=e(55),n=e.n(o),i=e(15),c=e(21),r=e(95),s=e(11),d=e(844),u=e(0),l=e(40),m=e(83),v=(e(850),e(851),e(590)),p=e(1501),j=e.n(p),h=e(1),b=function(a){var t=a.onClick;return Object(h.jsx)("div",{className:"download-icon",onClick:t,children:Object(h.jsx)(j.a,{})})},_=e(969),f=e(1101),x=(e(1504),e(606)),N=[],O=[],g=[],A=[],F="",S="",E="",R="",z=["Exame","Rec"],C="",D="",w="",M="";Object(v.a)((function(a){return{root:{"&:hover":{backgroundColor:"transparent"}}}})),t.default=function(){var a=Object(l.useLocation)(),t=atob(Object(d.parse)(a.search).cadeira),e=atob(Object(d.parse)(a.search).turma),o=atob(Object(d.parse)(a.search).curso),v=window.location.href.split("/");v=v[v.length-1];var p=Object(u.useState)(!1),j=Object(s.a)(p,2),y=j[0],T=j[1],k=Object(u.useState)([]),P=Object(s.a)(k,2),I=P[0],L=P[1],U=Object(u.useState)(!0),q=Object(s.a)(U,2),W=q[0],B=q[1];function G(){return(G=Object(r.a)(n.a.mark((function a(){var c,r,d,u,l,v,p,j;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return B(!0),a.next=3,Promise.all([Object(m.a)().getAvaliacoesByCadeiraAndTurma("/".concat(t,"/").concat(e)),Object(m.a)().buscarCurso("?campos=id,nome"),Object(m.a)().getEstudanteTurma("/".concat(e,"/").concat(t,"?campos=nome,id,apelido,numero,matricula.id,matricula.dataMatricula,matricula.anoFrequencia,matricula.turma,curso.id,curso.nome")),Object(m.a)().getCadeiraById("/".concat(t)),Object(m.a)().getTesteByCurso("/".concat(o,"/").concat(t,"?campos=id,nota,avaliacao.tipoAvaliacao,avaliacao.ordem,avaliacao.id,avaliacao.cadeira.id,avaliacao.cadeira.nome,estudante.id,estudante.nome,estudante.apelido,estudante.numero"))]);case 3:c=a.sent,r=Object(s.a)(c,5),d=r[0],u=r[1],l=r[2],v=r[3],p=r[4],O=u.data.filter((function(a){return a.id==o})),N=l.data,g=p.data,A=d.data,F=v.data,S=O.map((function(a){return a.nome})),A.filter((function(a){return"Exame"===a.tipoAvaliacao||"Rec"===a.tipoAvaliacao})),j={},g.forEach((function(a){var t=void 0===a.estudante?a.id:a.estudante.id;j[t]||(j[t]=Object(i.a)(Object(i.a)({},a),{},{notas:{}}));try{var e=A.find((function(t){return t.tipoAvaliacao===a.avaliacao.tipoAvaliacao&&t.ordem===a.avaliacao.ordem})),o=e.id;j[t].notas[o]=a.nota||""}catch(r){var n=A.find((function(a){return"Teste"===a.tipoAvaliacao&&1===a.ordem})),c=n?n.id:null;j[t].notas[c]=a.nota||""}})),L(Object.values(j)),T(!y),B(!1);case 22:case"end":return a.stop()}}),a)})))).apply(this,arguments)}Object(u.useEffect)((function(){!function(){G.apply(this,arguments)}()}),[]);var Y=function(a){return""!==a&&parseFloat(a)<9.5?"media-red":""},J=function(a){return"Excluido"===a||"Reprovado"===a?"media-red":""},Q=function(a){var t={},e=function(e){var o=A.find((function(a){return a.id===parseInt(e)}));(!o||"Exame"!==o.tipoAvaliacao&&"Rec"!==o.tipoAvaliacao)&&(t[e]=a[e])};for(var o in a)e(o);var n=Object.values(t).filter((function(a){return""!==a&&null!==a&&!isNaN(parseFloat(a))}));return n.length>=3?(n.reduce((function(a,t){return a+parseFloat(t)}),0)/n.length).toFixed(2):""},V=function(a,t,e){console.log("Parametros: ",a,t,R);var o=parseFloat(t),n=parseFloat(e);return!isNaN(o)&&isNaN(n)?o<8?n?(.6*parseFloat(a)+.4*n).toFixed(0):o:(.6*parseFloat(a)+.4*o).toFixed(0):isNaN(n)?"":(.6*parseFloat(a)+.4*n).toFixed(0)};return W?"Carregando":Object(h.jsx)("div",{children:0===g.length?Object(h.jsx)("div",{children:Object(h.jsx)(x.a,{severity:"warning",children:"Esta cadeira ainda n\xe3o possui notas. Se for algum engano Porfavor contacte o seu Departamento ou CIAM"})}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("table",{className:"AppTable",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Numero"}),Object(h.jsx)("th",{children:"Nome Completo"}),A.map((function(a,t){return C=z.every((function(a){return A.some((function(t){return t.tipoAvaliacao===a}))})),Object(h.jsxs)("th",{className:"right",children:[a.tipoAvaliacao," ","Exame"!==a.tipoAvaliacao?"Rec"===a.tipoAvaliacao?"":"-":""," ",a.ordem," "]})})),Object(h.jsx)("th",{className:"right",children:"Freq"}),Object(h.jsx)("th",{className:"right",children:"Obs"}),C&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("th",{className:"right",children:"M. Final"}),Object(h.jsx)("th",{className:"right",children:"Res Final"})]})]})}),Object(h.jsx)("tbody",{children:I.map((function(a){var t,e,o=Q(a.notas),n=o<=9.5?"Excluido":o>=13.5?"Dispensado":"Admitido";return R=parseFloat((null===(t=g.find((function(t){var e;return"Rec"===(null===(e=t.avaliacao)||void 0===e?void 0:e.tipoAvaliacao)&&null===t.avaliacao.ordem&&t.estudante.id===a.estudante.id})))||void 0===t?void 0:t.nota)||""),E=parseFloat((null===(e=g.find((function(t){var e;return"Exame"===(null===(e=t.avaliacao)||void 0===e?void 0:e.tipoAvaliacao)&&null===t.avaliacao.ordem&&t.estudante.id===a.estudante.id})))||void 0===e?void 0:e.nota)||""),D=isNaN(E)&&isNaN(R)&&parseFloat(o).toFixed(0),w=!isNaN(E)&&isNaN(R)&&!D&&V(o,E,R=NaN)>=10&&V(o,E,R=NaN),M=!isNaN(E)&&!isNaN(R)&&V(o,E=NaN,R)>=10&&V(o,E=NaN,R)||isNaN(E)&&!isNaN(R)&&V(o,E=NaN,R)<10&&V(o,E=NaN,R),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:void 0===a.estudante?a.numero:a.estudante.numero}),Object(h.jsxs)("td",{children:[void 0===a.estudante?a.nome:a.estudante.nome," ",void 0===a.estudante?a.apelido:a.estudante.apelido]}),A.map((function(t){var e=t.id,o=void 0!==a.notas[e]?a.notas[e]:"";return Object(h.jsx)("td",{className:"right ".concat(Y(o)),children:o},e)})),Object(h.jsx)("td",{className:"right ".concat(Y(o)),children:o}),Object(h.jsx)("td",{className:"right ".concat(J(n)),children:n}),C&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("td",{className:"right",children:D||w||M}),Object(h.jsx)("td",{className:"right ".concat(J(n)),children:""!==w&&(D&&D<10?"Reprovado":D>=14&&"Aprovado")||""===w&&""||!D&&!w&&!M&&"Recorr\xeancia"||w&&"Aprovado"||M&&V(o,E=NaN,R)>=10&&"Aprovado"||parseFloat(M)<10&&"Reprovado"})]})]},void 0===a.estudante?a.id:a.estudante.id)}))})]}),Object(h.jsx)(b,{onClick:function(){var a=new f.jsPDF({orientation:"landscape",unit:"mm",format:"a4"}),t=a.internal.pageSize.width,e=["C\xf3digo","Nome Completo"].concat(Object(c.a)(A.filter((function(a){return"Teste"===a.tipoAvaliacao||"Trab"===a.tipoAvaliacao})).map((function(a){return"".concat(a.tipoAvaliacao," ").concat(null===a.ordem?"":a.ordem)})))),o=["Freq","Observa\xe7\xe3o"].concat(Object(c.a)(A.filter((function(a){return"Exame"===a.tipoAvaliacao||"Rec"===a.tipoAvaliacao})).map((function(a){return"".concat(a.tipoAvaliacao," ").concat((a.tipoAvaliacao,""))})))),n=[].concat(Object(c.a)(e),Object(c.a)(C?[].concat(Object(c.a)(o),["M Final","Resultado"]):["Freq","Observa\xe7\xe3o"])),i=I.map((function(a){var t,e,o=Q(a.notas),n=o<=9.5?"Excluido":o>=13.5?"Dispensado":"Admitido",i=A.reduce((function(a,t){return"Exame"===t.tipoAvaliacao||"Rec"===t.tipoAvaliacao?a.exame.push(t):a.outros.push(t),a}),{exame:[],outros:[]}),r=i.exame,s=i.outros.map((function(t){return a.notas[t.id]||""})),d=r.map((function(t){return a.notas[t.id]||""}));return R=parseFloat((null===(t=g.find((function(t){return"Rec"===t.avaliacao.tipoAvaliacao&&null===t.avaliacao.ordem&&t.estudante.id===a.estudante.id})))||void 0===t?void 0:t.nota)||""),E=parseFloat((null===(e=g.find((function(t){return"Exame"===t.avaliacao.tipoAvaliacao&&null===t.avaliacao.ordem&&t.estudante.id===a.estudante.id})))||void 0===e?void 0:e.nota)||""),[void 0===a.estudante?a.numero:a.estudante.numero,"".concat(void 0===a.estudante?a.nome:a.estudante.nome," ").concat(void 0===a.estudante?a.apelido:a.estudante.apelido)].concat(Object(c.a)(s),[o,n],Object(c.a)(d),[n&&"Excluido"===n||"Dispensado"===n?parseFloat(o).toFixed(0):!isNaN(E)&&isNaN(R)?V(o,E,R)>=10?V(o,E,R):"":(V(o,E=NaN,R),V(o,E=NaN,R)),n&&"Excluido"===n?"Reprovado":"Dispensado"===n?"Aprovado":"Admitido"===n?!isNaN(E)&&isNaN(R)?V(o,E,R)>=10?"Aprovado":"Recorr\xeancia":V(o,E=NaN,R)>=10?"Aprovado":"Reprovado":"???"])})),r=(t-15)/2;a.addImage(_.a,"png",r,10,15,15);var s=30;a.setFontSize(14);var d=a.internal.pageSize.width/2;a.text("Academia \u201cMilitar Marechal Samora Machel\u201d",d,s,{align:"center"}),a.text("Direc\xe7\xe3o Pedag\xf3gica",d,37,{align:"center"}),a.text("Servi\xe7o de Registo Acad\xe9mico e Estat\xedstica",d,44,{align:"center"});var u="Processado por: SiGUAM_V1.0.0 \xa9 ".concat((new Date).getFullYear()),l=a.internal.pageSize.height-10;a.setFontSize(10),a.text(u,d,l,{align:"center"});var m="Departamento:".concat(F.departamento.nome),v="Curso: ".concat(S[0]).concat("Unica"!==A[0].turma.turma.turma?"-"+A[0].turma.turma.turma:""),p="Ano: ".concat("Primeiro"===A[0].turma.turma.ano?"1o Ano":"Segundo"===A[0].turma.turma.ano?"2o Ano":"Terceiro"===A[0].turma.turma.ano?"3o Ano":"Quarto"===A[0].turma.turma.ano?"4o Ano":"5o Ano");a.setFontSize(12),a.text(m,20,58);a.setFontSize(12),a.text(v,20,63),a.setFontSize(12),a.text(p,20,68);var j="Disciplina: ".concat(F.nome),h="Ano Lectivo: ".concat(A[0].turma.anoLectivo),b="Org\xe2nica: ".concat(N.length),x=a.getStringUnitWidth(j)*a.internal.getFontSize()/a.internal.scaleFactor,O=a.internal.pageSize.getWidth()-x-20;a.setFontSize(12),a.text(j,O,58),a.setFontSize(12),a.text(h,O,63),a.setFontSize(12),a.text(b,O,68),a.autoTable({head:[n],body:i,startY:72});var z=a.autoTable.previous.finalY+10,D="Data: ____/____/ ".concat(A[0].turma.anoLectivo),w=z,M="O Chefe do Departamento:",y="Data: ____/____/ ".concat(A[0].turma.anoLectivo),T=a.getStringUnitWidth(M)*a.internal.getFontSize()/a.internal.scaleFactor,k=a.internal.pageSize.getWidth()-T-20,P=z;a.setFontSize(12),a.text("Docente:",40,w),a.text("_____________________________",20,w+10),a.text(D,30,w+15),a.text(M,k,P,{align:"right"}),a.text("_____________________________",k+5,P+10,{align:"right"}),a.text(y,k-5,P+15,{align:"right"}),a.save("pauta.pdf")}})]})})}},850:function(a,t,e){},851:function(a,t,e){},969:function(a,t,e){"use strict";t.a=e.p+"static/media/LogoAM.8a28d798.png"}}]);
//# sourceMappingURL=34.0753ae9c.chunk.js.map