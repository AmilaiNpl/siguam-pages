(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[45],{1506:function(e,t,a){},1672:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a(55),c=a.n(n),r=a(15),s=a(95),o=a(11),i=a(0),l=a(1),u=function(e){var t=e.individualExcelData;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("th",{children:t.codigo}),Object(l.jsx)("th",{children:t.nome}),Object(l.jsx)("th",{children:t.cadeirasPrecendentes}),Object(l.jsx)("th",{children:t.cargaHoraria}),Object(l.jsx)("th",{children:t.departamento})]})},d=function(e){return e.excelData.map((function(e){return Object(l.jsx)("tr",{children:Object(l.jsx)(u,{individualExcelData:e})},e.referencia)}))},j=a(1103),b=(a(1506),a(1102),a(992)),m=a(590),h=a(682),p=a.n(h),O=a(83),f=a(185),x=a.n(f),v=Object(m.a)((function(){return{root:{"&:hover":{backgroundColor:"transparent"}}}})),g=[],N=[];function S(){var e=v(),t=Object(i.useState)(null),a=Object(o.a)(t,2),n=a[0],u=a[1],m=Object(i.useState)(null),h=Object(o.a)(m,2),f=h[0],S=h[1],y=Object(i.useState)(!0),C=Object(o.a)(y,2),P=C[0],w=C[1],D=Object(i.useState)(!0),k=Object(o.a)(D,2),A=k[0],E=k[1],F=Object(i.useState)(!0),I=Object(o.a)(F,2),T=I[0],U=(I[1],Object(i.useState)(null)),G=Object(o.a)(U,2),H=G[0],J=G[1],M=Object(i.useState)(null),_=Object(o.a)(M,2),q=_[0],z=_[1],B=Object(i.useState)(null),L=Object(o.a)(B,2),R=L[0],V=L[1],K=Object(i.useState)(!1),Q=Object(o.a)(K,2),W=Q[0],X=Q[1];function Y(){return(Y=Object(s.a)(c.a.mark((function e(){var t,a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(O.a)().buscarCadeiras("?campos=id,nome"),Object(O.a)().buscarDepartamentos("?campos=id,nome")]);case 2:t=e.sent,a=Object(o.a)(t,2),n=a[0],r=a[1],N=n.data,g=r.data,X(!W);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.useEffect)((function(){!function(){Y.apply(this,arguments)}()}),[]);var Z=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];function $(e){return e.replace(/\s+/g," ")}function ee(){return(ee=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve(Object(O.a)().postCadeira(t));case 3:x.a.fire("Exito!","Salvou com sucesso!","success"),X(!W),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),J(e.t0.response.data.mensagemUsuario),E(!1),setTimeout((function(){E(!0)}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("div",{className:"alert alert-danger",role:"alert",hidden:A,children:H}),Object(l.jsx)("div",{className:"alert alert-primary",role:"alert",hidden:T,children:"Cadeiras Salvo suceso"}),Object(l.jsx)("div",{className:"form",children:Object(l.jsxs)("form",{className:"form-group",autoComplete:"off",onSubmit:function(e){if(w(!1),e.preventDefault(),null!==n){var t=j.a(n,{type:"buffer"}),a=t.SheetNames[0],c=t.Sheets[a],s=j.b.sheet_to_json(c).map((function(e){var t=N.find((function(t){return t.nome===e.cadeirasPrecendentes})),a=t||null,n=g.find((function(t){return $(t.nome)===$(e.departamento)})),c=n||null;return e.cadeirasPrecendentes=[a],e.departamento=c,e}));V(s);var o=s.map((function(e){var t,a=g.find((function(t){var a;return t.nome===(null===(a=e.departamento)||void 0===a?void 0:a.nome)}));e.cadeirasPrecendentes||S("N\xe3o encontrou Cadeira precedente da Cadeira ".concat(e.nome)),a||S("N\xe3o encontrou Departamento da Cadeira ".concat(e.nome));var n=a||null;return Object(r.a)(Object(r.a)({},e),{},{departamento:null===n||void 0===n?void 0:n.nome,cadeirasPrecendentes:null===(t=e.cadeirasPrecendentes)||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.nome}))})}));z(o)}else z(null)},children:[Object(l.jsx)("h5",{children:"Carregar Cadeiras"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"file",className:"form-control",onChange:function(e){var t=e.target.files[0];if(t)if(t&&Z.includes(t.type)){var a=new FileReader;a.readAsArrayBuffer(t),a.onload=function(e){S(null),u(e.target.result)}}else S("Por favor selecione um ficheiro excel"),u(null);else console.log("Por favor selecione um ficheiro")},required:!0}),f&&Object(l.jsx)("div",{className:"text-danger",style:{marginTop:"5px"},children:f}),Object(l.jsx)("button",{className:"btn btn-success",style:{marginTop:"5px"},children:"Visualisar"})]})}),Object(l.jsx)("br",{}),Object(l.jsx)("hr",{}),Object(l.jsx)("h5",{children:"Lista de Pagamentos"}),Object(l.jsxs)("div",{className:"viewer",children:[null===q&&Object(l.jsx)(l.Fragment,{children:"Nenhum conteudo selecionado"}),null!==q&&Object(l.jsx)("div",{className:"table-responsive",children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"C\xf3digo"}),Object(l.jsx)("th",{scope:"col",children:"Nome"}),Object(l.jsx)("th",{scope:"col",children:"Cadeira Precedente"}),Object(l.jsx)("th",{scope:"col",children:"Carga Horaria "}),Object(l.jsx)("th",{scope:"col",children:"Departamento"})]})}),Object(l.jsx)("tbody",{children:Object(l.jsx)(d,{excelData:q})})]})})]}),!f&&Object(l.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",size:"large",onClick:function(){!function(e){ee.apply(this,arguments)}(R)},className:e.button,startIcon:Object(l.jsx)(p.a,{}),style:{float:"right"},hidden:P,children:"Salvar"})]})}}}]);
//# sourceMappingURL=45.8ee30981.chunk.js.map