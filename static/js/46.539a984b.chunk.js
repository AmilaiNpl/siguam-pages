(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[46],{1680:function(a,e,t){"use strict";t.r(e);var c=t(55),r=t.n(c),i=t(95),n=t(11),s=t(0),o=t.n(s),d=t(83),l=t(44),u=(t(688),t(753)),j=t(315),m=t(652),b=t(992),p=t(1497),O=t(1606),h=t(1607),f=t(914),x=t(1139),v=t(535),_=t(1608),g=t(185),N=t.n(g),y=t(1094),S=t(1592),C=t(1666),A=t(499),T=t(96),w=t(1),P=[],k=null,D=function(a){var e=a.cadeira,t=a.data,c=e,g=Object(s.useState)(!1),D=Object(n.a)(g,2),M=D[0],R=D[1],U=Object(s.useState)(!1),E=Object(n.a)(U,2),I=E[0],J=E[1],L=o.a.useState(!1),V=Object(n.a)(L,2),W=(V[0],V[1]),z=Object(s.useState)(!0),B=Object(n.a)(z,2),F=B[0],G=B[1],q=function(){J(!1)};function H(){return(H=Object(i.a)(r.a.mark((function a(){var e;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return G(!0),a.next=3,Promise.resolve(Object(d.a)().getTipoAvaliacao());case 3:e=a.sent,P=e.data,R(!M),G(!1);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}Object(s.useEffect)((function(){k=T.a.getCurrentUser(),function(){H.apply(this,arguments)}(),setTimeout((function(){G(!1)}),5e3)}),[]);var K=function(a){a.preventDefault(),W(!0),J(!0)},Q=j.b().shape({ordem:j.d().min(1,"Deve ter no minio 3 caratere").required("Campo Obrigatorio")});return Object(w.jsx)("div",{children:F?Object(w.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",marginTop:"20%"},children:Object(w.jsx)(A.a,{color:"#36d7b7"})}):Object(w.jsxs)("div",{className:"cadeira-card",children:[Object(w.jsxs)("div",{className:"cadeira-card__info",children:[Object(w.jsxs)("div",{className:"cadeira-card__titulo",children:[Object(w.jsx)("span",{className:"cadeira-card__codigo",children:" Cadeira:"})," ",c.cadeira.nome," ",Object(w.jsxs)("span",{className:"cadeira-card__codigo",children:[" Curso: ",c.curso.nome," "]}),Object(w.jsx)("span",{className:"title_turma_professor",children:"Professor:"}),Object(w.jsxs)(w.Fragment,{children:[c.docente.nome," ",c.docente.apelido]})," ",Object(w.jsxs)("span",{className:"title_turma_professor",children:["Turma:",Object(w.jsx)("span",{className:"turma",children:c.turma.turma})]})," "]}),Object(w.jsx)("br",{}),Object(w.jsx)("footer",{className:"cadeira-card__semestre",children:Object(w.jsxs)("span",{children:["Semestre:  ",Object(w.jsxs)("span",{className:"cadeira-card__titulo",children:[" ",c.semestre]})]})}),Object(w.jsx)("span",{className:"cadeira-card__codigo",children:"Codigo:"})," ",Object(w.jsx)("span",{className:"cadeira-card__titulo",children:c.cadeira.codigo}),Object(w.jsxs)("footer",{className:"cadeira-card__footer",children:[t.map((function(a){var e="Teste"===a.avaliacao&&1===a.ordem;if(a.cadeiras.find((function(a){return a.id===c.cadeira.id}))&&e){var t=new Date(a.dataRealizacao),r=Object(y.a)(t,7),i=Object(S.a)(r,"d MMMM yyyy",{locale:C.a}),n="\xdaltimo dia de Lan\xe7amento das notas  ".concat(1===a.ordem?" das Primeiras Avalia\xe7\xf5es":2===a.ordem?" das Segundas Avalia\xe7\xf5es ":"Exame"===a.avaliacao?"do Exame Normal":" de Recorr\xeancia","  ");return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:n}),Object(w.jsx)("div",{children:i})]},a.id)}return null})),Object(w.jsx)("div",{className:"cadeira-card__comments-count"}),"DPT"!==k.authorities[0]?Object(w.jsx)("div",{children:"RA_N2"===k.authorities[0]||"RA_N3"===k.authorities[0]?Object(w.jsxs)("div",{children:[Object(w.jsx)(l.c,{className:"cadeira-card__pauta",to:"/teacher/pauta?cadeira=".concat(btoa(c.cadeira.id),"&curso=").concat(btoa(c.curso.id),"&turma=").concat(btoa(c.turma.id)),children:"Ver Pauta"}),Object(w.jsx)(b.a,{className:"cadeira-card__pauta",onClick:K,children:"Difinir Avalia\xe7\xf5es"})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{className:"cadeira-card__pauta",onClick:K,children:"Difinir Avalia\xe7\xf5es"}),Object(w.jsx)(l.c,{className:"cadeira-card__pauta",to:"/pauta/pautaCadeira?cadeira=".concat(btoa(c.cadeira.id),"&curso=").concat(btoa(c.curso.id),"&turma=").concat(btoa(c.turma.turma)),children:"Lan\xe7ar Notas"}),Object(w.jsx)(l.c,{className:"cadeira-card__pauta",to:"/teacher/pauta?cadeira=".concat(btoa(c.cadeira.id),"&curso=").concat(btoa(c.curso.id),"&turma=").concat(btoa(c.turma.id)),children:"Pauta"})]})}):Object(w.jsx)(l.c,{className:"cadeira-card__pauta",to:"/teacher/pauta?cadeira=".concat(btoa(c.cadeira.id),"&curso=").concat(btoa(c.curso.id),"&turma=").concat(btoa(c.turma.id)),children:"Ver Pauta"})]})]}),I&&Object(w.jsxs)(u.a,{onClose:q,"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(p.a,{id:"form-dialog-title",children:"Tipo da Avaliacao"}),Object(w.jsxs)(O.a,{children:[Object(w.jsx)(h.a,{children:"Profavor difina o tipo de avalicao e a respetiva ordem"}),Object(w.jsx)(m.d,{initialValues:{},validationSchema:Q,onSubmit:function(a,e){var t=e.setSubmitting;function c(){return(c=Object(i.a)(r.a.mark((function a(e){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(JSON.stringify(e),"Dados"),a.prev=1,a.next=4,Promise.resolve(Object(d.a)().postPais([e]));case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(1),N.a.fire({icon:"error",title:"Oops...",text:"Ocorreu um erro !!",footer:"Se o erro pressistir porfavor contacte o centro Informatico"});case 9:case"end":return a.stop()}}),a,null,[[1,6]])})))).apply(this,arguments)}!function(a){c.apply(this,arguments)}(a),setTimeout((function(){t(!1)}),500)},children:function(a){var e=a.values,t=a.touched,c=a.errors,r=(a.dirty,a.isSubmitting,a.handleChange),i=a.handleBlur;a.handleSubmit,a.handleReset,a.setFieldValue;return Object(w.jsxs)(m.c,{children:[Object(w.jsxs)(f.a,{container:!0,spacing:2,children:[Object(w.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(x.a,{type:"text",variant:"outlined",name:"tipoAvaliacao",error:c.tipoAvaliacao&&t.tipoAvaliacao,helperText:c.tipoAvaliacao,onChange:r,select:!0,value:e.tipoAvaliacao,margin:"dense",id:"tipoAvaliacao",fullWidth:!0,label:"Tipo de Avaliacao",children:P.map((function(a){return Object(w.jsx)(v.a,{value:a,children:a},a)}))})}),Object(w.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(x.a,{type:"text",variant:"outlined",name:"ordem",error:c.ordem&&t.ordem,helperText:c.ordem,onChange:r,onBlur:i,value:e.ordem,margin:"dense",id:"ordem",fullWidth:!0,label:"Ordem"})})]}),Object(w.jsxs)(_.a,{children:[Object(w.jsx)(b.a,{onClick:q,children:"Cancelar"}),Object(w.jsx)(b.a,{type:"submit",onClick:q,children:"Salvar"})]})]})}})]})]})]},c.id)})},M=null,R=null;e.default=function(){var a=Object(s.useState)([]),e=Object(n.a)(a,2),t=e[0],c=e[1],o=Object(s.useState)(!1),l=Object(n.a)(o,2),u=l[0],j=l[1],m=Object(s.useState)([]),b=Object(n.a)(m,2),p=b[0],O=b[1],h=Object(s.useState)(!0),f=Object(n.a)(h,2),x=(f[0],f[1]);function v(){return(v=Object(i.a)(r.a.mark((function a(){var e;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return x(!0),a.next=3,Object(d.a)().getUsuarioLogado(M.sub,"?campos=id,numero");case 3:e=a.sent,R=e.data,x(!1);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function _(){return(_=Object(i.a)(r.a.mark((function a(){var e,t,i,s,o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([Object(d.a)().getCalendario("?campos=id,avaliacao,ordem,cadeiras.id,cadeiras.nome,dataRealizacao"),Object(d.a)().getTurmasCadeiras("?campos=id,semestre,departamento,turma,anoLectivo,cadeira.id,cadeira.departamento,cadeira.codigo,cadeira.nome,curso,docente.id,docente.nome,docente.apelido")]);case 2:e=a.sent,t=Object(n.a)(e,2),i=t[0],s=t[1],"DPT"===M.authorities[0]?(console.log("listaCadeiras.data ",JSON.stringify(s.data)),o=s.data.filter((function(a){return a.cadeira.departamento.id===R.dpt.id})),console.log("cadeirasDepart ",o),c(o),x(!1),j(!u)):(c(s.data),x(!1),j(!u)),O(i.data),j(!u);case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(s.useEffect)((function(){M=T.a.getCurrentUser(),function(){v.apply(this,arguments)}(),setTimeout((function(){x(!1)}),5e3),function(){_.apply(this,arguments)}()}),[]),Object(w.jsx)("div",{style:{maxWidth:800,margin:"30px auto"},children:t.map((function(a){return Object(w.jsx)(D,{cadeira:a,data:p})}))})}},688:function(a,e,t){}}]);
//# sourceMappingURL=46.539a984b.chunk.js.map