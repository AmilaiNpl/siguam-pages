(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[47],{1686:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a.n(n),i=a(95),c=a(11),o=a(0),s=a.n(o),l=(a(688),a(914)),u=a(1689),d=(a(320),a(83)),p=a(1692),j=a(528),f=a(606),h=a(644),b=a(1693),m=a(1139),x=a(535),O=a(992),v=a(529),g=a(533),y=a(532),E=a(645),T=a(530),w=a(531),F=a(526),R=a(174),W=a(283),S=function(){return(S=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},A=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},N=Object(W.a)("ClockLoader","100% { transform: rotate(360deg) }","rotate");var k=function(e){var t=e.loading,a=void 0===t||t,n=e.color,r=void 0===n?"#000000":n,i=e.speedMultiplier,c=void 0===i?1:i,s=e.cssOverride,l=void 0===s?{}:s,u=e.size,d=void 0===u?50:u,p=A(e,["loading","color","speedMultiplier","cssOverride","size"]),j=Object(R.b)(d),f=j.value,h=j.unit,b=S({display:"inherit",position:"relative",width:"".concat(f).concat(h),height:"".concat(f).concat(h),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(r),borderRadius:"50%"},l),m={position:"absolute",backgroundColor:r,width:"".concat(f/3,"px"),height:"2px",top:"".concat(f/2-1,"px"),left:"".concat(f/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(N," ").concat(8/c,"s linear infinite")},x={position:"absolute",backgroundColor:r,width:"".concat(f/2.4,"px"),height:"2px",top:"".concat(f/2-1,"px"),left:"".concat(f/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(N," ").concat(2/c,"s linear infinite")};return a?o.createElement("span",S({style:b},p),o.createElement("span",{style:x}),o.createElement("span",{style:m})):null},C=a(96),M=a(1),P=[],B=[],I=[],q=null,z={},D=Object(M.jsx)(s.a.Fragment,{children:Object(M.jsx)(p.a,{children:Object(M.jsx)(j.a,{sx:{fontSize:14},variant:"h2",color:"text.primary",gutterBottom:!0,children:"Notas de Exame"})})}),L=[];t.default=function(e){var t=Object(o.useState)(""),a=Object(c.a)(t,2),n=a[0],s=a[1],p=Object(o.useState)(!1),j=Object(c.a)(p,2),R=j[0],W=j[1],S=Object(o.useState)(!0),A=Object(c.a)(S,2),N=A[0],U=A[1],G=Object(o.useState)(!1),J=Object(c.a)(G,2),Q=J[0],Y=J[1],H=Object(o.useState)([]),K=Object(c.a)(H,2),V=K[0],X=K[1];function Z(){return(Z=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)().getEstudanteByNumero(q.sub,"?campos=id,nome,apelido");case 2:z=e.sent,$(),W(!R);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,Promise.resolve(Object(d.a)().getMatriculaByEstudante("/".concat(null===(t=z)||void 0===t?void 0:t.data.id)));case 3:(P=e.sent).data.forEach((function(e){var t=e.dataMatricula,a=new Date(t).getFullYear();B.includes(a)||B.push(a)})),W(!R),U(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}e.next=11;break;case 3:return e.next=5,Promise.resolve(Object(d.a)().getTeste("/".concat(null===(t=z)||void 0===t?void 0:t.data.id,"?campos=id,nota,cadeira.id,cadeira.nome,avaliacao.id,avaliacao.tipoAvaliacao,avaliacao.ordem,estudante.id,estudante.nome,estudante.apelido,estudante.matricula.dataMatricula,estudante.nome,estudante.apelido,estudante.matricula.cadeiras.id,estudante.matricula.cadeiras.nome")));case 5:I=e.sent,L=Array.from(new Set(I.data.map((function(e){return"".concat(e.avaliacao.tipoAvaliacao).concat(null!==e.avaliacao.ordem?"-"+e.avaliacao.ordem:"")})))),L.filter((function(e){return e.startsWith("Teste")})),L.filter((function(e){return e.startsWith("Trab")})),X(Array.from(new Set(P.data.flatMap((function(e){return e.cadeiras.map((function(e){return e.nome}))}))))),W(!R);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.useEffect)((function(){q=C.a.getCurrentUser(),function(){Z.apply(this,arguments)}(),setTimeout((function(){U(!1)}),2e3)}),[]),Object(o.useEffect)((function(){var e=setTimeout((function(){Y(!0)}),5e3);return function(){return clearTimeout(e)}}),[]);var te=function(e,t,a){var n=parseFloat(t),r=parseFloat(a);return!isNaN(n)&&isNaN(r)?n<8?r?(.6*parseFloat(e)+.4*r).toFixed(0):n:(.6*parseFloat(e)+.4*n).toFixed(0):isNaN(r)?"":(.6*parseFloat(e)+.4*r).toFixed(0)},ae=function(e){var t=Object.values(e).filter((function(e){return""!==e&&null!==e&&!isNaN(parseFloat(e))}));return t.length>=3?(t.reduce((function(e,t){return e+parseFloat(t)}),0)/t.length).toFixed(2):""};return N?Object(M.jsx)("div",{children:Q?Object(M.jsxs)(f.a,{severity:"warning",children:[Object(M.jsx)(h.a,{children:"Tempo de Espera Excedido"}),"Deveria mostrar alguma informa\xe7\xe3o. Por favor, avise o ",Object(M.jsx)("strong",{children:"CIAM"})," sobre este problema."]}):Object(M.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(M.jsx)(k,{color:"#36D7B7",loading:!0,size:35})})}):Object(M.jsxs)(u.a,{sx:{minWidth:275},children:[Object(M.jsxs)(b.a,{variant:"outlined",children:[D,Object(M.jsx)(l.a,{container:!0,spacing:2,children:Object(M.jsxs)(l.a,{item:!0,xs:12,sm:4,className:"selectComponet",children:[Object(M.jsx)(m.a,{className:"inputSelect",type:"text",variant:"outlined",name:"turma",onChange:function(e){s(e.target.value)},select:!0,margin:"dense",id:"turma",fullWidth:!0,label:"-- Seleciona Ano Lectivo --",children:B.map((function(e){return Object(M.jsx)(x.a,{value:e,children:"Ano Lectivo de "+e},e)}))}),Object(M.jsx)(O.a,{variant:"contained",className:"btnBuscar",onClick:function(){return ee.apply(this,arguments)},children:"Buscar"})]})})]}),V.length>0&&Object(M.jsx)(b.a,{variant:"outlined",style:{marginTop:"2%"},children:Object(M.jsx)(E.a,{component:F.a,children:Object(M.jsxs)(v.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(M.jsx)(T.a,{children:Object(M.jsxs)(w.a,{children:[Object(M.jsx)(y.a,{children:"Disciplina"}),Object(M.jsx)(y.a,{align:"right",children:"Ano"}),Object(M.jsx)(y.a,{align:"right",children:"Freq"}),Object(M.jsx)(y.a,{align:"right",children:"Observa\xe7\xe3o"}),Object(M.jsx)(y.a,{align:"right",children:"Exame Normal"}),Object(M.jsx)(y.a,{align:"right",children:"Exame de Recorr\xeancia "}),Object(M.jsx)(y.a,{align:"center",children:"M. Final"}),Object(M.jsx)(y.a,{align:"center",children:"R. Final"})]})}),Object(M.jsx)(g.a,{children:V.map((function(e,t){var a={},n=P.data.find((function(t){return t.cadeiras.some((function(t){return t.nome===e}))}));return L.forEach((function(t){var n=t.split("-"),r=Object(c.a)(n,2),i=r[0],o=r[1],s=I.data.find((function(t){return t.avaliacao.tipoAvaliacao===i&&(t.avaliacao.ordem===parseInt(o)||null===t.avaliacao.ordem)&&t.cadeira.nome===e}));a[t]=s?s.nota:null})),Object(M.jsxs)(w.a,{children:[Object(M.jsx)(y.a,{children:e}),Object(M.jsx)(y.a,{align:"right",children:n?"Primeiro"===n.anoFrequencia?"1":"Segundo"===n.anoFrequencia?"2":"Terceiro"===n.anoFrequencia?"3":"Quarto"===n.anoFrequencia?"4":"5":""}),Object(M.jsx)(y.a,{align:"right",children:ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))}),Object(M.jsx)(y.a,{align:"right",style:{color:ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))<9.5?"red":ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))>=13.5?"#3CB371":""},children:""!==ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))?ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))<9.5?"Excluido":ae(L.filter((function(e){return e.startsWith("Teste")||e.startsWith("Trab")})).map((function(e){return a[e]})))>=13.5?"Dispensado":"Admitido":""}),Object(M.jsx)(y.a,{align:"center",children:a.Exame}),Object(M.jsx)(y.a,{align:"center",children:a.Rec}),Object(M.jsx)(y.a,{align:"center",children:a.Exame&&!a.Rec?a.Exame>=10?a.Exame:"":a.Exame&&a.Rec?(te(ae(L.map((function(e){return a[e]}))),a.Exame=void 0,a.Rec),te(ae(L.map((function(e){return a[e]}))),a.Exame,a.Rec)):""}),Object(M.jsx)(y.a,{align:"center",children:a.Exame&&!a.Rec?te(ae(L.map((function(e){return a[e]}))),a.Exame,a.Rec)>=10?"Aprovado":a.Exame&&a.Rec&&a.Rec?"Tem nota de Recorrencia":"Recorr\xeancia":a.Rec&&a.Rec?te(ae(L.map((function(e){return a[e]}))),a.Exame,a.Rec)>=10?"Aprovado":"Reprovado":""})]},t)}))})]})})})]})}},688:function(e,t,a){}}]);
//# sourceMappingURL=47.039ed9f6.chunk.js.map