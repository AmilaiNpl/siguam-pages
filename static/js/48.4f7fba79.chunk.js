(this.webpackJsonpSIGUAM=this.webpackJsonpSIGUAM||[]).push([[48],{1649:function(a,e,t){"use strict";t.r(e);var n=t(21),c=t(55),r=t.n(c),i=t(95),o=t(11),s=t(0),l=t.n(s),u=(t(688),t(914)),d=t(1689),j=(t(320),t(83)),b=t(1692),p=t(528),m=t(606),h=t(644),f=t(1693),v=t(1139),O=t(535),x=t(992),g=t(529),A=t(533),y=t(532),T=t(645),S=t(530),w=t(531),F=t(526),E=t(96),C=t(1),k=[],q=[],M=[],N=[],B=null,P={},W=[],D=Object(C.jsx)(l.a.Fragment,{children:Object(C.jsx)(b.a,{children:Object(C.jsx)(p.a,{sx:{fontSize:14},variant:"h2",color:"text.primary",gutterBottom:!0,children:"Notas de Frequ\xeancia"})})}),I=[];e.default=function(a){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],l=t[1],b=Object(s.useState)(!1),p=Object(o.a)(b,2),U=p[0],z=p[1],G=Object(s.useState)(!1),J=Object(o.a)(G,2),L=(J[0],J[1],Object(s.useState)([])),Q=Object(o.a)(L,2),R=Q[0],Y=Q[1],H=Object(s.useState)(!1),K=Object(o.a)(H,2),V=K[0],X=K[1],Z=Object(s.useState)(!0),$=Object(o.a)(Z,2),_=$[0],aa=$[1];function ea(){return(ea=Object(i.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(j.a)().getEstudanteByNumero(B.sub,"?campos=id,nome,apelido");case 2:P=a.sent,ta(),z(!U);case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function ta(){return na.apply(this,arguments)}function na(){return(na=Object(i.a)(r.a.mark((function a(){var e;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve(Object(j.a)().getMatriculaByEstudante("/".concat(null===(e=P)||void 0===e?void 0:e.data.id)));case 2:(k=a.sent).data.forEach((function(a){var e=a.dataMatricula,t=new Date(e).getFullYear();q.includes(t)||q.push(t)})),z(!U),aa(!1);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function ca(){return(ca=Object(i.a)(r.a.mark((function a(){var e,t,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c){a.next=3;break}a.next=8;break;case 3:return a.next=5,Promise.resolve(Object(j.a)().getTeste("/".concat(P.data.id,"?campos=id,nota,cadeira.id,cadeira.nome,avaliacao.id,avaliacao.tipoAvaliacao,avaliacao.ordem,estudante.id,estudante.nome,estudante.apelido,estudante.nome,estudante.apelido")));case 5:M=a.sent,N=M.data.filter((function(a){return"Exame"!==a.avaliacao.tipoAvaliacao&&"Rec"!==a.avaliacao.tipoAvaliacao})),0===M.data.length?(M=[{avaliacao:{id:260,tipoAvaliacao:"Teste",ordem:1}},{avaliacao:{id:260,tipoAvaliacao:"Teste",ordem:2}},{avaliacao:{id:260,tipoAvaliacao:"Trab",ordem:1}},{avaliacao:{id:260,tipoAvaliacao:"Trab",ordem:2}}],I=Array.from(new Set(M.map((function(a){return"".concat(a.avaliacao.tipoAvaliacao,"-").concat(a.avaliacao.ordem)})))),e=k.data.map((function(a){return a.cadeiras})),console.log("cadeirasMatricula",e),W=I.length>0?I:["Teste-1","Teste-2","Trabalho-1","Trabalho-2"],Y.apply(void 0,Object(n.a)(e))):(I=Array.from(new Set(N.map((function(a){return"".concat(a.avaliacao.tipoAvaliacao,"-").concat(a.avaliacao.ordem)})))),t=I.filter((function(a){return a.startsWith("Teste")})),i=I.filter((function(a){return a.startsWith("Trab")})),W=[].concat(Object(n.a)(t),Object(n.a)(i)),Y(Array.from(new Set(k.data.flatMap((function(a){return a.cadeiras.map((function(a){return a}))}))))),z(!U));case 8:case"end":return a.stop()}}),a)})))).apply(this,arguments)}Object(s.useEffect)((function(){B=E.a.getCurrentUser(),z(!U),function(){ea.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){var a=setTimeout((function(){X(!0)}),5e3);return function(){return clearTimeout(a)}}),[]);var ra=function(a){var e=Object.values(a).filter((function(a){return""!==a&&null!==a&&!isNaN(parseFloat(a))}));return e.length>=3?(e.reduce((function(a,e){return a+parseFloat(e)}),0)/e.length).toFixed(2):""};return _?Object(C.jsx)("div",{children:V?Object(C.jsxs)(m.a,{severity:"warning",children:[Object(C.jsx)(h.a,{children:"Tempo de Espera Excedido"}),"Deveria mostrar alguma informa\xe7\xe3o. Por favor, avise o ",Object(C.jsx)("strong",{children:"CIAM"})," sobre este problema."]}):Object(C.jsx)("div",{children:"Processando!"})}):Object(C.jsxs)(d.a,{sx:{minWidth:275},children:[Object(C.jsxs)(f.a,{variant:"outlined",children:[D,Object(C.jsx)(u.a,{container:!0,spacing:2,children:Object(C.jsxs)(u.a,{item:!0,xs:12,sm:4,className:"selectComponet",children:[Object(C.jsx)(v.a,{className:"inputSelect",type:"text",variant:"outlined",name:"turma",onChange:function(a){l(a.target.value)},select:!0,margin:"dense",id:"turma",fullWidth:!0,label:"-- Seleciona Ano Lectivo --",children:q.map((function(a){return Object(C.jsx)(O.a,{value:a,children:"Ano Lectivo de "+a},a)}))}),Object(C.jsx)(x.a,{variant:"contained",className:"btnBuscar",onClick:function(){return ca.apply(this,arguments)},children:"Buscar"})]})})]}),R.length>0&&Object(C.jsx)(f.a,{variant:"outlined",style:{marginTop:"2%"},children:Object(C.jsx)(T.a,{component:F.a,children:Object(C.jsxs)(g.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(C.jsx)(S.a,{children:Object(C.jsxs)(w.a,{children:[Object(C.jsx)(y.a,{children:"##"}),Object(C.jsx)(y.a,{children:"Codigo"}),Object(C.jsx)(y.a,{children:"Disciplina"}),Object(C.jsx)(y.a,{align:"right",children:"Ano"}),W.map((function(a,e){var t=a.split("-"),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(C.jsxs)(y.a,{align:"center",children:[c," - ",r]},e)})),Object(C.jsx)(y.a,{align:"right",children:"Frequ\xeancia"}),Object(C.jsx)(y.a,{align:"right",children:"Observa\xe7\xe3o"})]})}),Object(C.jsx)(A.a,{children:R.map((function(a,e){console.log("Cadeiras aqui-1: ",a),console.log("Cadeiras aqui: ",a.nome);var t={},n=k.data.find((function(e){return e.cadeiras.some((function(e){return e.nome===a.nome}))}));return I.forEach((function(e){var n,c=e.split("-"),r=Object(o.a)(c,2),i=r[0],s=r[1],l=null===(n=N)||void 0===n?void 0:n.find((function(e){return e.avaliacao.tipoAvaliacao===i&&e.avaliacao.ordem===parseInt(s)&&e.cadeira.nome===a.nome}));l&&null!==l.avaliacao.ordem?t[e]=l.nota:t[e]=null})),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(y.a,{children:e+1}),Object(C.jsx)(y.a,{children:a.codigo}),Object(C.jsx)(y.a,{children:a.nome}),Object(C.jsx)(y.a,{align:"right",children:n?"Primeiro"===n.anoFrequencia?"1":"Segundo"===n.anoFrequencia?"2":"Terceiro"===n.anoFrequencia?"3":"Quarto"===n.anoFrequencia?"4":"5":""}),I.map((function(a,e){return Object(C.jsx)(y.a,{align:"center",style:{color:t[a]<=9.5?"red":"inherit"},children:t[a]},e)})),Object(C.jsx)(y.a,{align:"right",children:ra(I.map((function(a){return t[a]})))}),Object(C.jsx)(y.a,{align:"right",style:{color:ra(I.map((function(a){return t[a]})))<9.5?"red":ra(I.map((function(a){return t[a]})))>=13.5?"#3CB371":""},children:""!==ra(I.map((function(a){return t[a]})))?ra(I.map((function(a){return t[a]})))<9.5?"Excluido":ra(I.map((function(a){return t[a]})))>=13.5?"Dispensado":"Admitido":""})]},e)}))})]})})})]})}},688:function(a,e,t){}}]);
//# sourceMappingURL=48.4f7fba79.chunk.js.map